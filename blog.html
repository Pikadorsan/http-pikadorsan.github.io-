<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kancelaria Adwokacka • Adwokat Anna Franus – Zielona Góra</title>
  <meta name="description" content="Kancelaria Adwokacka Adwokat Anna Franus w Zielonej Górze. Profesjonalna pomoc prawna: rozwody, alimenty, spadki, umowy, obsługa firm." />
  <meta name="keywords" content="adwokat Zielona Góra, kancelaria adwokacka, adwokat rodzinny, prawo cywilne, prawnik, spadki, rozwody, alimenty, umowy, kancelaria Anna Franus" />
  <meta name="author" content="Kancelaria Adwokacka Adwokat Anna Franus" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <link rel="canonical" href="https://adwokatannafranus.pl/blog.html" />
  <link rel="icon" type="image/png" href="logo.png" sizes="32x32">
  <link rel="shortcut icon" type="image/png" href="logo.png">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&display=swap" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&display=swap"></noscript>
  <link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"></noscript>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
:root{--bg:#191919;--card:#202020;--muted:#b3b3b3;--text:#efefef;--brand:#2aa9a9;--brand-2:#31c4b5;--radius:18px;--hero:url('IMG1.avif');}
*{box-sizing:border-box}html{scroll-behavior:smooth}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#1a1a1a 0%,#1c1c1c 50%,#181818 100%);color:var(--text)}
a{color:inherit;text-decoration:none}img{max-width:100%;display:block;border-radius:var(--radius)}
.container{max-width:1100px;margin:0 auto;padding:0 20px}

/* NAV – 1:1 z index.html */
.nav{position:sticky;top:0;z-index:60;background:rgba(25,25,25,.9);backdrop-filter:blur(8px);border-bottom:1px solid rgba(180,180,180,.08)}
.nav-inner{display:flex;align-items:center;justify-content:space-between;padding:14px 0;position:relative;padding-left:12px;padding-right:12px}
.brand{display:flex;align-items:center;gap:12px}
.brand .logo{width:42px;height:42px;border-radius:12px;object-fit:cover;border:1px solid rgba(56,189,248,.35);box-shadow:0 0 12px rgba(34,211,238,0.25);background:none}
.brand h1{font-size:18px;line-height:1.1;margin:0;font-family:'Crimson Text',Georgia,'Times New Roman',Times,serif!important;font-weight:700;letter-spacing:.2px;line-height:1.05}
@media (max-width:560px){.brand h1{font-size:17px}}
.nav a.btn{padding:10px 14px;border-radius:12px;border:1px solid rgba(42,169,169,.35);background:linear-gradient(180deg,rgba(42,169,169,.15),rgba(42,169,169,.05));color:#e6f9ff}
.nav .links a{margin-left:14px;color:var(--muted);display:inline-block}
.nav .links a.btn{background:transparent!important;border:0!important;color:var(--muted)!important;border-radius:8px;width:100%;padding:10px 12px}
.nav .links a:hover,.nav .links a.btn:hover{color:var(--brand-2)!important;background:rgba(148,163,184,.06)}
@media (min-width:769px){.nav-toggle{display:none!important}.nav .links{display:flex!important;position:static!important;flex-direction:row!important;align-items:center;gap:0;padding:0;background:transparent;border:0;box-shadow:none;min-width:auto}.nav .links a{display:inline-block;margin-left:14px;padding:0;text-align:left;width:auto}.nav .links a.btn{color:var(--muted)!important;border:1px solid rgba(42,169,169,.35)!important;background:linear-gradient(180deg,rgba(42,169,169,.15),rgba(42,169,169,.05))!important}.nav .links a.btn:hover{background:linear-gradient(180deg,var(--brand),var(--brand-2))!important;color:#07222a!important;box-shadow:0 0 8px rgba(45,212,191,0.35)}}
.nav-toggle{display:none;background:rgba(42,169,169,.08);border:1px solid rgba(42,169,169,.35);border-radius:12px;width:44px;height:44px;color:#e6f9ff;font-size:20px;cursor:pointer;margin-right:8px;transition:all .25s ease}
.nav-toggle:hover{background:linear-gradient(180deg,var(--brand),var(--brand-2));color:#07222a;box-shadow:0 0 8px rgba(45,212,191,0.35)}
@media (max-width:768px){.nav{overflow:visible}.nav .links{flex-direction:column;align-items:flex-start}.nav .links a.btn{color:var(--brand-2)!important;text-align:left!important;width:100%;display:block;background:transparent!important;border:none!important;margin-left:0!important}.nav-toggle{display:inline-flex;align-items:center;justify-content:center;margin-left:auto;margin-right:12px}.nav .links{position:absolute;right:12px;top:calc(100% + 8px);z-index:70;background:#0f0f0f;border:1px solid rgba(148,163,184,.18);border-radius:14px;padding:10px;min-width:200px;display:none;flex-direction:column;gap:8px;box-shadow:0 10px 30px rgba(0,0,0,.45);animation:fadeIn .18s ease}.nav .links a{margin:0;padding:10px 12px}.nav .links .btn{display:block;text-align:center}.nav .links.open{display:flex}.brand h1{font-size:16px}.brand .logo{width:38px;height:38px}}
@keyframes fadeIn{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}

/* Blog */
header.blog-head{padding:40px 0 16px;border-bottom:1px solid rgba(148,163,184,.12);background:linear-gradient(180deg,#1a1a1a 0%,#1c1c1c 50%,#181818 100%)}
header.blog-head h2{font-size:38px;margin:0 0 6px}
header.blog-head p{margin:0;color:#d7dee6}
.search-wrap{display:flex;gap:8px;margin-top:18px}
.search-wrap input{flex:1;padding:10px 12px;border-radius:12px;border:1px solid rgba(148,163,184,.18);background:#101214;color:#eaeef4}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;padding:24px 0}
@media (max-width:900px){.grid{grid-template-columns:1fr}}
.post-card{background:linear-gradient(180deg,rgba(255,255,255,.015),rgba(255,255,255,.01));border:1px solid rgba(180,180,180,.1);border-radius:var(--radius);padding:18px}
.post-card h3{margin:0 0 6px;font-size:24px}
.post-card h3 a{color:inherit;text-decoration:none}
.post-card h3 a:hover{color:var(--brand-2)}
.meta{font-size:13px;color:#9fb3c8;display:flex;flex-wrap:wrap;gap:6px 12px;margin-bottom:12px}
.tags{display:flex;flex-wrap:wrap;gap:6px}
.tag{font-size:12px;color:#d1f4ff;border:1px solid rgba(56,189,248,.35);background:rgba(56,189,248,.12);padding:4px 8px;border-radius:999px}
.cover{border-radius:14px;overflow:hidden;margin-bottom:12px;border:1px solid rgba(148,163,184,.14)}
.excerpt{color:#cfd7df;margin-top:8px}
.readmore{display:inline-block;margin-top:6px;font-weight:600;color:var(--brand-2)}
.empty{color:#9fb3c8;padding:24px 0;text-align:center}

/* Footer – 1:1 z index */
footer{margin-top:60px;border-top:1px solid rgba(148,163,184,.12);padding:28px 0;color:#a5b4c3}
.foot{display:flex;flex-wrap:wrap;align-items:center;gap:10px;justify-content:space-between}
.social a{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;border:1px solid rgba(42,169,169,.4);color:#2dd4bf;background:rgba(42,169,169,.08);transition:all .25s ease;margin-left:6px}
.social a:hover{background:linear-gradient(180deg,var(--brand),var(--brand-2));color:#07222a;transform:translateY(-2px);box-shadow:0 0 8px rgba(45,212,191,0.35)}
.social i{font-size:18px}
  </style>
</head>

<body>
  <!-- NAVBAR -->
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="index.html#top">
        <img src="logo.png" alt="Logo kancelarii" class="logo" width="42" height="42">
        <h1> Kancelaria Adwokacka<br><span style="color:var(--brand)">Adwokat Anna Franus</span></h1>
      </a>
      <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="Otwórz menu"><i class="fa-solid fa-bars"></i></button>
      <div id="nav-menu" class="links">
        <a href="index.html#uslugi">Usługi</a>
        <a href="index.html#cennik">Cennik</a>
        <a href="blog.html" aria-current="page" style="color:var(--brand-2)">Blog</a>
        <a class="btn" href="index.html#kontakt">Kontakt</a>
      </div>
    </div>
  </nav>

  <!-- HEADER BLOGA -->
  <header class="blog-head">
    <div class="container">
      <h2>Blog</h2>
      <p>Porady i artykuły prawne. Najnowsze wpisy znajdują się na górze.</p>
      <div class="search-wrap"><input id="q" type="search" placeholder="Szukaj po tytułach i tagach…"></div>
    </div>
  </header>

  <!-- LISTA WPISÓW -->
  <main class="container">
    <section id="posts" class="grid" aria-live="polite"></section>
    <p id="empty" class="empty" style="display:none">Brak wyników dla podanego filtra.</p>
  </main>

  <!-- STOPKA -->
  <footer>
    <div class="container foot">
      <div>© <span id="year"></span> Kancelaria Adwokacka Adwokat Anna Franus • Wszystkie prawa zastrzeżone</div>
      <div class="social">
        <a href="https://www.facebook.com/share/1CvWSiwB24/?mibextid=wwXIfr" target="_blank" rel="noopener" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="https://www.instagram.com/adwokat_anna_franus?igsh=NHdkOWF2bm4xbjR4&utm_source=qr" target="_blank" rel="noopener" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      </div>
    </div>
  </footer>

<script>
  /* ===== Rok w stopce ===== */
  (function(){ 
    var y = document.getElementById('year'); 
    if (y) y.textContent = new Date().getFullYear(); 
  })();

  /* ===== NAV: hamburger / dropdown (jak w index.html) ===== */
  (function () {
    const btn  = document.querySelector('.nav-toggle');
    const menu = document.getElementById('nav-menu');
    if (!btn || !menu) return;

    btn.addEventListener('click', () => {
      const open = menu.classList.toggle('open');
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
      btn.innerHTML = open ? '<i class="fa-solid fa-xmark"></i>' : '<i class="fa-solid fa-bars"></i>';
    });

    menu.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', () => {
        menu.classList.remove('open');
        btn.setAttribute('aria-expanded', 'false');
        btn.innerHTML = '<i class="fa-solid fa-bars"></i>';
      });
    });

    window.addEventListener('resize', () => {
      if (window.innerWidth > 768) {
        menu.classList.remove('open');
        btn.setAttribute('aria-expanded', 'false');
        btn.innerHTML = '<i class="fa-solid fa-bars"></i>';
      }
    });
  })();

  /* ===== BLOG ===== */
  const PATH = 'blog';      // katalog z plikami BLOG1.txt, BLOG2.txt, ...
  let ALL_POSTS = [];

  // Bezpieczne budowanie URL względem bieżącej strony (działa w podkatalogach)
  function blogUrl(file) {
    return new URL(file, window.location.href).toString();
  }

  // Parsowanie metadanych + treści z TXT
  function parseMetaAndBody(raw) {
    const parts = raw.split(/\r?\n-{3,}\r?\n/);           // separator: linia z --- (min 3)
    const head  = parts[0] || '';
    const body  = parts.slice(1).join('\n---\n') || '';
    const meta  = {};
    head.split(/\r?\n/).forEach(line => {
      const m = line.match(/^\s*([A-Za-z]+)\s*:\s*(.+)\s*$/);
      if (m) meta[m[1].toUpperCase()] = m[2];
    });
    return { meta, body };
  }

  // Proste „odmarkdownowanie” do zajawki
  function stripMd(md){
    return md
      .replace(/```[\s\S]*?```/g,'')         // bloki kodu
      .replace(/`[^`]*`/g,'')                // inline code
      .replace(/!\[[^\]]*\]\([^)]+\)/g,'')   // obrazki
      .replace(/\[[^\]]*\]\([^)]+\)/g,'')    // linki
      .replace(/[#>*_\-`~]+/g,'')            // dekoracje
      .replace(/\r?\n\r?\n/g,' ⏎ ')          // akapity
      .replace(/\r?\n/g,' ');
  }
  function excerpt(md, n = 220) {
    const t = stripMd(md).trim();
    return t.length > n ? t.slice(0, n).replace(/\s+\S*$/, '') + '…' : t;
  }

  // Pobierz pojedynczy wpis (zwraca null przy 404/błędzie)
  async function fetchOne(n) {
    try {
      const url = blogUrl(`${PATH}/BLOG${n}.txt`);
      const res = await fetch(url, { cache: 'no-store' });
      if (!res.ok) return null;                    // np. 404
      const raw = await res.text();
      const { meta, body } = parseMetaAndBody(raw);
      return {
        id: n,
        title: meta.TITLE || `Wpis #${n}`,
        date:  meta.DATE  || '',
        tags:  (meta.TAGS || '').split(',').map(s => s.trim()).filter(Boolean),
        image: meta.IMAGE || '',
        body
      };
    } catch (e) {
      return null;
    }
  }

  // Skaner: idzie po kolejnych plikach i kończy po 3 kolejnych 404 (max 100 prób)
  async function loadAll() {
    const found = [];
    let i = 1, misses = 0;
    const MISS_LIMIT = 3;
    const HARD_LIMIT = 100;

    while (misses < MISS_LIMIT && i <= HARD_LIMIT) {
      const p = await fetchOne(i);
      if (p) { found.push(p); misses = 0; }
      else   { misses++; }
      i++;
    }

    found.sort((a,b) => b.id - a.id);
    ALL_POSTS = found;
    render(found);
  }

  // Karta wpisu (naprawione dodawanie obrazka)
  function makeCard(p) {
    const w = document.createElement('article');
    w.className = 'post-card';

    // Tytuł
    const h = document.createElement('h3');
    const a = document.createElement('a');
    a.href = `post.html?id=BLOG${p.id}`;
    a.textContent = p.title || 'Bez tytułu';
    h.appendChild(a);

    // Meta: data + tagi
    const meta = document.createElement('div');
    meta.className = 'meta';
    const date = document.createElement('span');
    date.textContent = p.date ? new Date(p.date).toLocaleDateString('pl-PL') : '';
    const tags = document.createElement('div');
    tags.className = 'tags';
    (p.tags || []).forEach(t => {
      const s = document.createElement('span');
      s.className = 'tag';
      s.textContent = '#' + t;
      tags.appendChild(s);
    });
    meta.appendChild(date);
    if ((p.tags || []).length) meta.appendChild(tags);

    w.appendChild(h);
    w.appendChild(meta);

    // ✅ Obraz dodaj tylko, jeśli jest ustawiony i się ładuje
    if (p.image && p.image.trim() !== '') {
      const c = document.createElement('div');
      c.className = 'cover';
      const img = document.createElement('img');
      img.loading = 'lazy';
      img.src = p.image.trim();
      img.alt = p.title || 'Okładka wpisu';
      img.onerror = () => c.remove();             // zniknij, gdy nie ma obrazka
      c.appendChild(img);
      w.appendChild(c);
    }

    // Zajawka + "Czytaj dalej"
    const ex = document.createElement('p');
    ex.className = 'excerpt';
    ex.textContent = excerpt(p.body);

    const rm = document.createElement('a');
    rm.className = 'readmore';
    rm.href = `post.html?id=BLOG${p.id}`;
    rm.textContent = 'Czytaj dalej →';

    w.appendChild(ex);
    w.appendChild(rm);

    return w;
  }

  // Render listy
  function render(list) {
    const root  = document.getElementById('posts');
    const empty = document.getElementById('empty');
    if (!root) return;

    root.innerHTML = '';
    if (!list.length) { 
      if (empty) empty.style.display = 'block';
      return; 
    }
    if (empty) empty.style.display = 'none';
    list.forEach(p => root.appendChild(makeCard(p)));
  }

  // Szukaj po tytule i tagach
  function setupSearch() {
    const q = document.getElementById('q');
    if (!q) return;
    q.addEventListener('input', () => {
      const term = q.value.trim().toLowerCase();
      if (!term) return render(ALL_POSTS);
      const f = ALL_POSTS.filter(p =>
        (p.title || '').toLowerCase().includes(term) ||
        (p.tags  || []).some(t => t.toLowerCase().includes(term))
      );
      render(f);
    });
  }

  // Start
  setupSearch();
  loadAll();
</script>


</body>
</html>
