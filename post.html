<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blog • Kancelaria Adwokacka Adwokat Anna Franus</title>
  <meta name="description" content="Artykuł z bloga Kancelarii Adwokackiej Adwokat Anna Franus." />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <link rel="icon" type="image/png" href="logo.png" sizes="32x32">
  <link rel="shortcut icon" type="image/png" href="logo.png">

  <!-- Fonts -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&display=swap" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&display=swap"></noscript>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"></noscript>

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
:root { --bg:#191919; --card:#202020; --muted:#b3b3b3; --text:#efefef; --brand:#2aa9a9; --brand-2:#31c4b5; --radius:18px; }
*{box-sizing:border-box} html{scroll-behavior:smooth}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#1a1a1a 0%,#1c1c1c 50%,#181818 100%);color:var(--text)}
a{color:inherit;text-decoration:none}
img{max-width:100%;display:block;border-radius:var(--radius)}
.container{max-width:1100px;margin:0 auto;padding:0 20px}

/* NAV */
.nav{position:sticky;top:0;z-index:60;background:rgba(25,25,25,.9);backdrop-filter:blur(8px);border-bottom:1px solid rgba(180,180,180,.08)}
.nav-inner{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
.brand{display:flex;align-items:center;gap:12px}
.brand .logo{width:42px;height:42px;border-radius:12px;object-fit:cover;border:1px solid rgba(56,189,248,.35);box-shadow:0 0 12px rgba(34,211,238,0.25);background:none}
.brand h1{font-size:18px;line-height:1.1;margin:0;font-family:'Crimson Text',Georgia,'Times New Roman',Times,serif!important;font-weight:700;letter-spacing:.2px;line-height:1.05}
@media (max-width:560px){ .brand h1{font-size:17px} }
.nav .links a{margin-left:14px;color:var(--muted);display:inline-block}
.nav a.btn{padding:10px 14px;border-radius:12px;border:1px solid rgba(42,169,169,.35);background:linear-gradient(180deg,rgba(42,169,169,.15),rgba(42,169,169,.05));color:#e6f9ff}
.nav .links a.btn{background:transparent!important;border:0!important;color:var(--muted)!important;border-radius:8px;width:100%;padding:10px 12px}
.nav .links a:hover, .nav .links a.btn:hover{color:var(--brand-2)!important;background:rgba(148,163,184,.06)}
@media (min-width:769px){
  .nav-toggle{display:none!important}
  .nav .links{display:flex!important;position:static!important;flex-direction:row!important;align-items:center;gap:0;padding:0;background:transparent;border:0;box-shadow:none;min-width:auto}
  .nav .links a{display:inline-block;margin-left:14px;padding:0;text-align:left;width:auto}
  .nav .links a.btn{color:var(--muted)!important;border:1px solid rgba(42,169,169,.35)!important;background:linear-gradient(180deg,rgba(42,169,169,.15),rgba(42,169,169,.05))!important}
  .nav .links a.btn:hover{background:linear-gradient(180deg,var(--brand),var(--brand-2))!important;color:#07222a!important;box-shadow:0 0 8px rgba(45,212,191,0.35)}
}
/* hamburger */
.nav-inner{position:relative;padding-left:12px;padding-right:12px}
.nav-toggle{display:none;background:rgba(42,169,169,.08);border:1px solid rgba(42,169,169,.35);border-radius:12px;width:44px;height:44px;color:#e6f9ff;font-size:20px;cursor:pointer;margin-right:8px;transition:all .25s ease}
.nav-toggle:hover{background:linear-gradient(180deg,var(--brand),var(--brand-2));color:#07222a;box-shadow:0 0 8px rgba(45,212,191,0.35)}
@media (max-width:768px){
  .nav{overflow:visible}
  .nav .links{flex-direction:column;align-items:flex-start}
  .nav .links a.btn{color:var(--brand-2)!important;text-align:left!important;width:100%;display:block;background:transparent!important;border:none!important;margin-left:0!important}
  .nav-toggle{display:inline-flex;align-items:center;justify-content:center;margin-left:auto;margin-right:12px}
  .nav .links{position:absolute;right:12px;top:calc(100% + 8px);z-index:70;background:#0f0f0f;border:1px solid rgba(148,163,184,.18);border-radius:14px;padding:10px;min-width:200px;display:none;flex-direction:column;gap:8px;box-shadow:0 10px 30px rgba(0,0,0,.45);animation:fadeIn .18s ease}
  .nav .links a{margin:0;padding:10px 12px}
  .nav .links .btn{display:block;text-align:center}
  .nav .links.open{display:flex}
  .brand h1{font-size:16px}
  .brand .logo{width:38px;height:38px}
}
@keyframes fadeIn{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}

/* ARTICLE */
.page-head{padding:28px 0 8px}
.article{background:linear-gradient(180deg,rgba(255,255,255,.015),rgba(255,255,255,.01));border:1px solid rgba(180,180,180,.1);border-radius:var(--radius);padding:22px;margin:18px 0}
.article h1{font-size:38px;line-height:1.2;margin:6px 0 10px}
.article .meta{display:flex;gap:12px;align-items:center;color:#9fb3c8;font-size:14px;margin-bottom:12px;flex-wrap:wrap}
.tags{display:flex;gap:8px;flex-wrap:wrap}
.tag{font-size:12px;padding:4px 10px;border-radius:999px;border:1px solid rgba(42,169,169,.35);background:rgba(42,169,169,.08);color:#c8f7f1}
.cover{margin:12px 0;border-radius:16px;overflow:hidden;border:1px solid rgba(148,163,184,.18)}
.article-content{line-height:1.7;font-size:18px}
.article-content h2{font-size:26px;margin:22px 0 10px}
.article-content h3{font-size:22px;margin:18px 0 8px}
.article-content p{margin:10px 0}
.article-content ul, .article-content ol{padding-left:22px}
.article-content blockquote{margin:12px 0;padding:10px 14px;border-left:4px solid var(--brand-2);background:rgba(148,163,184,.06);border-radius:8px}
.article-nav{display:flex;justify-content:space-between;gap:10px;margin-top:16px}
.article-nav a{display:inline-block;padding:10px 12px;border:1px solid rgba(42,169,169,.35);border-radius:12px;background:rgba(42,169,169,.08)}
.backlink{display:inline-block;margin-top:6px;color:var(--brand-2)}
/* Footer */
footer{margin-top:60px;border-top:1px solid rgba(148,163,184,.12);padding:28px 0;color:#a5b4c3}
.foot{display:flex;flex-wrap:wrap;align-items:center;gap:10px;justify-content:space-between}
.social a{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;border:1px solid rgba(42,169,169,.4);color:#2dd4bf;background:rgba(42,169,169,.08);transition:all .25s ease;margin-left:6px}
.social a:hover{background:linear-gradient(180deg,var(--brand),var(--brand-2));color:#07222a;transform:translateY(-2px);box-shadow:0 0 8px rgba(45,212,191,0.35)}
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="nav">
  <div class="container nav-inner">
    <a class="brand" href="index.html#top">
      <img src="logo.png" alt="Logo kancelarii" class="logo" width="42" height="42">
      <h1>Kancelaria Adwokacka<br><span style="color:var(--brand)">Adwokat Anna Franus</span></h1>
    </a>

    <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="Otwórz menu"><i class="fa-solid fa-bars"></i></button>

    <div id="nav-menu" class="links">
      <a href="index.html#uslugi">Usługi</a>
      <a href="index.html#cennik">Cennik</a>
      <a href="blog.html">Blog</a>
      <a class="btn" href="index.html#kontakt">Kontakt</a>
    </div>
  </div>
</nav>

<header class="page-head">
  <div class="container">
    <a class="backlink" href="blog.html">← Wróć do bloga</a>
  </div>
</header>

<main class="container">
  <article class="article" id="post">
    <!-- tu wejdzie tytuł, meta, obraz i treść -->
  </article>
  <div class="article-nav container" id="pager" style="display:none">
    <a id="prev" href="#"></a>
    <a id="next" href="#"></a>
  </div>
</main>

<footer>
  <div class="container foot">
    <div>© <span id="year"></span> Kancelaria Adwokacka Adwokat Anna Franus • Wszystkie prawa zastrzeżone</div>
    <div class="social">
      <a href="https://www.facebook.com/share/1CvWSiwB24/?mibextid=wwXIfr" target="_blank" rel="noopener" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="https://www.instagram.com/adwokat_anna_franus?igsh=NHdkOWF2bm4xbjR4&utm_source=qr" target="_blank" rel="noopener" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
    </div>
  </div>
</footer>

<script>
/* Rok w stopce */
(function(){ const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear(); })();

/* NAV hamburger */
(function(){
  const btn=document.querySelector('.nav-toggle');
  const menu=document.getElementById('nav-menu');
  if(!btn||!menu) return;
  btn.addEventListener('click',()=>{
    const open=menu.classList.toggle('open');
    btn.setAttribute('aria-expanded',open?'true':'false');
    btn.innerHTML=open?'<i class="fa-solid fa-xmark"></i>':'<i class="fa-solid fa-bars"></i>';
  });
  menu.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>{
    menu.classList.remove('open');
    btn.setAttribute('aria-expanded','false');
    btn.innerHTML='<i class="fa-solid fa-bars"></i>';
  }));
  window.addEventListener('resize',()=>{
    if(window.innerWidth>768){
      menu.classList.remove('open');
      btn.setAttribute('aria-expanded','false');
      btn.innerHTML='<i class="fa-solid fa-bars"></i>';
    }
  });
})();

/* ====== POST READER ====== */
const PATH = 'blog';

function getParam(name){
  const u=new URL(window.location.href);
  return u.searchParams.get(name)||'';
}
function blogUrl(file){
  return new URL(file, window.location.href).toString();
}
function parseMetaAndBody(raw){
  const parts=raw.split(/\r?\n-{3,}\r?\n/);
  const head=parts[0]||''; const body=parts.slice(1).join('\n---\n')||'';
  const meta={};
  head.split(/\r?\n/).forEach(l=>{
    const m=l.match(/^\s*([A-Za-z]+)\s*:\s*(.+)\s*$/);
    if(m) meta[m[1].toUpperCase()]=m[2];
  });
  return { meta, body };
}

/* mini-markdown -> HTML (nagłówki, pogrubienia, listy, linki, obrazki, cytaty, code) */
function mdToHtml(md){
  // escape
  let h=md.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');

  // code blocks (``` ... ```)
  h = h.replace(/```([\s\S]*?)```/g, (_,code)=>`<pre><code>${code.replace(/&/g,'&amp;')}</code></pre>`);

  // images ![alt](src)
  h = h.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, (_,alt,src)=>`<img src="${src}" alt="${alt}">`);

  // links [text](href)
  h = h.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener">$1</a>');

  // bold/italic
  h = h.replace(/\*\*([^*]+)\*\*/g,'<strong>$1</strong>').replace(/__([^_]+)__/g,'<strong>$1</strong>');
  h = h.replace(/\*([^*]+)\*/g,'<em>$1</em>').replace(/_([^_]+)_/g,'<em>$1</em>');

  // blockquotes
  h = h.replace(/(^|\n)>\s?(.*)/g,'$1<blockquote>$2</blockquote>');

  // headings ###
  h = h.replace(/(^|\n)######\s?(.+)\n?/g,'$1<h6>$2</h6>')
       .replace(/(^|\n)#####\s?(.+)\n?/g,'$1<h5>$2</h5>')
       .replace(/(^|\n)####\s?(.+)\n?/g,'$1<h4>$2</h4>')
       .replace(/(^|\n)###\s?(.+)\n?/g,'$1<h3>$2</h3>')
       .replace(/(^|\n)##\s?(.+)\n?/g,'$1<h2>$2</h2>')
       .replace(/(^|\n)#\s?(.+)\n?/g,'$1<h1>$2</h1>');

  // lists
  // ordered
  h = h.replace(/(^|\n)(\d+\.\s.+(?:\n\d+\.\s.+)*)/g, (m,pre,block)=>{
    const items = block.split(/\n/).map(li=>li.replace(/^\d+\.\s/,'')).map(li=>`<li>${li}</li>`).join('');
    return `${pre}<ol>${items}</ol>`;
  });
  // unordered
  h = h.replace(/(^|\n)([-*]\s.+(?:\n[-*]\s.+)*)/g, (m,pre,block)=>{
    const items = block.split(/\n/).map(li=>li.replace(/^[-*]\s/,'')).map(li=>`<li>${li}</li>`).join('');
    return `${pre}<ul>${items}</ul>`;
  });

  // paragraphs
  h = h.replace(/\r?\n{2,}/g,'</p><p>');
  h = `<p>${h}</p>`;
  return h;
}

async function fileExists(name){
  try{
    const r = await fetch(blogUrl(`${PATH}/${name}`), { method:'GET', cache:'no-store' });
    return r.ok;
  }catch{ return false; }
}

function renderTags(root, tagsArr){
  if(!tagsArr || !tagsArr.length) return null;
  const wrap = document.createElement('div'); wrap.className='tags';
  tagsArr.forEach(t=>{ const s=document.createElement('span'); s.className='tag'; s.textContent='#'+t; wrap.appendChild(s); });
  root.appendChild(wrap);
}

async function loadPost(){
  const id = getParam('id') || '';
  const match = id.match(/^BLOG(\d{1,})$/i);
  if(!match){
    document.getElementById('post').innerHTML = '<p>Niepoprawny identyfikator wpisu.</p>';
    return;
  }
  const num = parseInt(match[1],10);
  const url = blogUrl(`${PATH}/BLOG${num}.txt`);

  try{
    const res = await fetch(url, { cache:'no-store' });
    if(!res.ok) throw new Error('404');

    const raw = await res.text();
    const { meta, body } = parseMetaAndBody(raw);

    const root = document.getElementById('post');
    root.innerHTML = '';

    // tytuł
    const h1 = document.createElement('h1');
    h1.textContent = meta.TITLE || `Wpis #${num}`;
    root.appendChild(h1);

    // meta (data + tagi)
    const metaBox = document.createElement('div');
    metaBox.className = 'meta';
    const d = document.createElement('span');
    d.textContent = meta.DATE ? new Date(meta.DATE).toLocaleDateString('pl-PL') : '';
    metaBox.appendChild(d);
    root.appendChild(metaBox);

    // tagi
    const tags = (meta.TAGS || '').split(',').map(s=>s.trim()).filter(Boolean);
    if(tags.length){
      const tagsWrap = document.createElement('div'); tagsWrap.className='tags';
      tags.forEach(t => { const s=document.createElement('span'); s.className='tag'; s.textContent='#'+t; tagsWrap.appendChild(s); });
      root.appendChild(tagsWrap);
    }

    // obrazek (jeśli jest i działa)
    const image = (meta.IMAGE || '').trim();
    if(image){
      const c = document.createElement('div'); c.className='cover';
      const img = document.createElement('img'); img.loading='lazy'; img.src = image; img.alt = meta.TITLE || `Okładka BLOG${num}`;
      img.onerror = () => c.remove();
      c.appendChild(img); root.appendChild(c);
    }

    // treść
    const art = document.createElement('div');
    art.className = 'article-content';
    art.innerHTML = mdToHtml(body || '');
    root.appendChild(art);

    // pager
    const pager = document.getElementById('pager');
    const prev = document.getElementById('prev');
    const next = document.getElementById('next');
    let hasPrev=false, hasNext=false;

    if(num>1 && await fileExists(`BLOG${num-1}.txt`)){
      prev.href = `post.html?id=BLOG${num-1}`;
      prev.textContent = '← Poprzedni wpis';
      hasPrev=true;
    } else { prev.style.display='none'; }

    if(await fileExists(`BLOG${num+1}.txt`)){
      next.href = `post.html?id=BLOG${num+1}`;
      next.textContent = 'Następny wpis →';
      hasNext=true;
    } else { next.style.display='none'; }

    if(hasPrev || hasNext) pager.style.display='flex';
  }catch(e){
    document.getElementById('post').innerHTML = '<p>Nie znaleziono tego wpisu.</p>';
    document.getElementById('pager').style.display='none';
  }
}

loadPost();
</script>
</body>
</html>
